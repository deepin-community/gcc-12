From 56ce8f6e66f2d5405bd35e928fc3f854258f3319 Mon Sep 17 00:00:00 2001
From: biqx <biqx@localhost.localdomain>
Date: Wed, 25 Sep 2024 09:48:33 +0800
Subject: [PATCH 11/11] SW_64: Fix a FAIL in libgomp caused by the
 atomic_exchange<mode>_1 template.

---
 src/gcc/config/sw_64/sync.md | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/gcc/config/sw_64/sync.md b/src/gcc/config/sw_64/sync.md
index 37480eabcc1..d73d5fc61f4 100644
--- a/src/gcc/config/sw_64/sync.md
+++ b/src/gcc/config/sw_64/sync.md
@@ -351,7 +351,8 @@
 	   (match_operand:DI 3 "register_operand" "r")		;; align
 	   (match_operand:SI 4 "const_int_operand")]		;; model
 	  UNSPEC_XCHG))
-   (clobber (match_scratch:DI 5 "=&r"))]
+   (clobber (match_scratch:DI 5 "=&r"))
+   (clobber (reg:DI 28))]
   ""
   "#"
   "epilogue_completed"
-- 
2.35.3

